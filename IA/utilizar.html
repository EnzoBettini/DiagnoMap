<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiagnoMap - Documentação do Agente de IA</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --primary-color: #075985;
            --secondary-color: #34495e;
            --accent-color: #f59e0b;
            --highlight-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f97316;
            --info-color: #3b82f6;
            --success-color: #22c55e;

            --text-light: #f8fafc;
            --text-dark: #1f2937;
            --text-muted: #6b7280;

            --bg-light: #FFFFFF;
            --bg-base: #f0f4f8;
            --bg-surface: #FFFFFF;
            --bg-code: #1e293b;
            --text-code: #e2e8f0;

            --border-color: #e5e7eb;
            --border-radius-sm: 6px;
            --border-radius-md: 10px;
            --border-radius-lg: 12px;

            --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.08);

            --font-primary: 'Roboto', sans-serif;
            --font-secondary: 'Montserrat', sans-serif;
            --font-code: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-primary);
            margin: 0;
            background: var(--bg-base);
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            min-height: 100vh;
            line-height: 1.65;
        }

        .doc-container {
            background-color: var(--bg-surface);
            padding: 35px 45px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            width: 100%;
            max-width: 900px;
            border-top: 5px solid var(--primary-color);
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .page-header .logo-icon {
            font-size: 2.5em;
            color: var(--highlight-color);
            margin-right: 8px;
            vertical-align: middle;
        }

        .page-header .logo-diagno {
            font-family: var(--font-secondary);
            font-size: 2em;
            font-weight: 500;
            color: var(--text-dark);
        }

        .page-header .logo-map {
            font-family: var(--font-secondary);
            font-size: 2em;
            font-weight: 700;
            color: var(--highlight-color);
        }

        .page-header h1 {
            font-family: var(--font-secondary);
            color: var(--primary-color);
            font-size: 2.2em;
            font-weight: 600;
            margin-top: 15px;
            margin-bottom: 5px;
        }

        .page-header .subtitle {
            font-size: 1.1em;
            color: var(--text-muted);
            font-weight: 400;
        }

        .notice-box {
            background-color: rgba(240, 244, 248, 0.7);
            border: 1px solid var(--border-color);
            border-left: 5px solid var(--info-color);
            padding: 15px 20px;
            border-radius: var(--border-radius-md);
            margin: 20px 0 30px 0;
            font-size: 0.95em;
        }

        .notice-box p {
            margin: 0;
            line-height: 1.6;
        }

        .notice-box strong {
            color: var(--primary-color);
        }

        .notice-box i {
            margin-right: 10px;
            color: var(--info-color);
        }


        .doc-section {
            margin-bottom: 30px;
        }

        .doc-section h2 {
            font-family: var(--font-secondary);
            color: var(--primary-color);
            font-size: 1.6em;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--highlight-color);
        }

        .doc-section h3 {
            font-family: var(--font-secondary);
            color: var(--secondary-color);
            font-size: 1.3em;
            font-weight: 500;
            margin-top: 25px;
            margin-bottom: 12px;
        }

        .doc-section p,
        .doc-section li {
            font-size: 0.98em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .doc-section strong {
            font-weight: 600;
            color: var(--primary-color);
        }

        .doc-section ul,
        .doc-section ol {
            margin-left: 20px;
            padding-left: 15px;
        }

        .doc-section li {
            margin-bottom: 8px;
        }

        pre {
            background-color: var(--bg-code);
            color: var(--text-code);
            padding: 20px;
            border-radius: var(--border-radius-sm);
            overflow-x: auto;
            font-family: var(--font-code);
            font-size: 0.9em;
            line-height: 1.5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            margin: 15px 0;
            border: 1px solid #334155;
        }

        code {
            font-family: var(--font-code);
            background-color: rgba(52, 73, 94, 0.1);
            color: var(--secondary-color);
            padding: .2em .5em;
            margin: 0 .2em;
            font-size: 90%;
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(52, 73, 94, 0.2);
        }

        pre code {
            background-color: transparent;
            padding: 0;
            margin: 0;
            font-size: inherit;
            border-radius: 0;
            border: none;
            color: inherit;
        }

        .page-footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.85em;
            color: var(--text-muted);
        }

        .actions-bar {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .btn {
            padding: 10px 20px;
            font-size: 0.95em;
            border: none;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: filter 0.2s ease, transform 0.15s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            justify-content: center;
            font-weight: 500;
        }

        .btn:hover {
            filter: brightness(110%);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #064e6f;
        }


        @media (max-width: 768px) {
            .doc-container {
                padding: 25px 20px;
            }

            .page-header h1 {
                font-size: 1.8em;
            }

            .page-header .subtitle {
                font-size: 1em;
            }

            .doc-section h2 {
                font-size: 1.4em;
            }

            .doc-section h3 {
                font-size: 1.2em;
            }
        }
    </style>
</head>

<body>
    <div class="doc-container">
        <header class="page-header">
            <div>
                <i class="fas fa-heart-pulse logo-icon"></i>
                <span class="logo-diagno">Diagno</span><span class="logo-map">Map</span>
            </div>
            <h1>Agente de IA - Saúde</h1>
            <p class="subtitle">Documentação para o backend de análise de dados de saúde e como usar a interface de
                teste.</p>
        </header>

        <div class="notice-box">
            <p><i class="fas fa-info-circle"></i><strong>Nota Importante sobre o Protótipo DiagnoMap:</strong> O sistema
                principal do DiagnoMap, acessível através do link "Explorar Protótipo" na página inicial, é um
                <strong>modelo estático (mockup)</strong>. Ele serve para demonstrar a interface e o fluxo das
                funcionalidades. As interações com dados e a lógica de IA são simuladas nessa área. Apenas a página de
                "Teste Interativo da IA" (vinculada ao botão "Acessar Demonstração") se conecta a este backend de IA
                para processamento real (quando o backend estiver rodando e configurado corretamente).</p>
        </div>

        <section class="doc-section">
            <h2>Como Rodar o Agente de IA (Backend)</h2>
            <p>Siga os passos abaixo para configurar e iniciar o servidor do Agente de IA localmente.</p>

            <h3>Para Ambiente Local (Desenvolvimento/Teste):</h3>
            <ol>
                <li>
                    <strong>Pré-requisitos:</strong>
                    <ul>
                        <li>Node.js e NPM (ou Yarn) instalados.</li>
                        <li>Uma chave de API válida da OpenAI (ou do provedor de LLM que seu backend utiliza).</li>
                    </ul>
                </li>
                <li>
                    <strong>Configure sua Chave da API:</strong>
                    <p>O backend precisará da sua chave de API para se comunicar com o modelo de linguagem. Configure-a
                        como uma variável de ambiente no seu backend Node.js (geralmente em um arquivo
                        <code>.env</code>, por exemplo: <code>OPENAI_API_KEY=sua_chave_aqui</code>). Consulte a
                        documentação específica do seu código backend para o nome exato da variável e como configurá-la.
                    </p>
                </li>
                <li>
                    <strong>Instale as dependências do backend:</strong>
                    <p>Navegue até o diretório do seu backend no terminal e execute:</p>
                    <pre><code>npm install</code></pre>
                    <p>Ou, se estiver usando Yarn:</p>
                    <pre><code>yarn install</code></pre>
                </li>
                <li>
                    <strong>Inicie o servidor do backend:</strong>
                    <pre><code>npm start</code></pre>
                    <p>Ou, se estiver usando Yarn:</p>
                    <pre><code>yarn start</code></pre>
                </li>
            </ol>
            <p>Após iniciar, o servidor do Agente de IA estará disponível (por padrão) em:
                <strong>http://localhost:3001</strong>. Você poderá testá-lo usando a página <a href="IA/teste.html"
                    title="Acessar a página de teste interativo da IA">Teste Interativo da IA</a>.</p>

            <h3>Para Ambiente Web (se o backend estiver deployado):</h3>
            <p>Se o backend da IA estiver hospedado em um servidor web (por exemplo, para uma demonstração online do
                sistema completo):</p>
            <ul>
                <li>A página de <a href="teste.html" title="Acessar a página de teste interativo da IA">Teste
                        Interativo da IA</a> já deverá estar configurada para usar o endpoint correto da API deployada.
                </li>
                <li>Nesse caso, você não precisa rodar o backend localmente para usar a interface de teste online.</li>
            </ul>
        </section>

        <section class="doc-section">
            <h2>Utilizando a Interface de Teste da IA</h2>
            <p>A página <a href="teste.html" title="Acessar a página de teste interativo da IA">Teste Interativo da
                    IA</a> permite que você envie dados de casos de saúde para o Agente de IA e visualize a análise
                retornada.</p>
            <ol>
                <li>
                    <strong>Adicionar Registros de Caso:</strong>
                    <ul>
                        <li>Ao carregar a página, um formulário para o primeiro registro já estará visível.</li>
                        <li>Preencha os campos: "Endereço", "Diagnóstico" e "Sintomas".</li>
                        <li>Clique no botão "<strong><i class='fas fa-plus'></i> Adicionar Novo Registro de
                                Caso</strong>" para adicionar mais formulários, caso queira enviar múltiplos casos na
                            mesma requisição.</li>
                        <li>Cada registro pode ser removido individualmente clicando no botão "<i
                                class='fas fa-trash-alt'></i> Remover".</li>
                    </ul>
                </li>
                <li>
                    <strong>Enviar para Análise:</strong>
                    <ul>
                        <li>Após preencher os dados dos casos desejados, clique no botão "<strong><i
                                    class='fas fa-paper-plane'></i> Enviar Dados para Análise</strong>".</li>
                        <li>A interface automaticamente converterá os dados dos formulários para o formato JSON esperado
                            pelo backend e enviará a requisição.</li>
                    </ul>
                </li>
                <li>
                    <strong>Visualizar Resultado:</strong>
                    <ul>
                        <li>A resposta da IA será exibida na seção "Resultado da Análise".</li>
                        <li>Se a IA retornar dados estruturados (como a lista de análises de doenças que você
                            especificou), eles serão apresentados em "cards" individuais para melhor leitura.</li>
                        <li>Se a IA retornar texto formatado em Markdown ou um JSON genérico, a página tentará
                            formatá-lo da melhor maneira possível.</li>
                    </ul>
                </li>
            </ol>

            <h3>Endpoint de Análise Usado pela Interface</h3>
            <p>A interface de teste envia os dados para o endpoint <code>POST /analise</code> do seu Agente de IA.</p>

            <h4>Formato do JSON Enviado Automaticamente:</h4>
            <p>Ao clicar em "Enviar", a interface coleta os dados dos campos e monta um JSON no seguinte formato para o
                corpo da requisição:</p>
            <pre><code>{
    "dados": [
        {
            "endereco": "Valor do campo Endereço do Registro 1",
            "diagnostico": "Valor do campo Diagnóstico do Registro 1",
            "sintomas": "Valor do campo Sintomas do Registro 1"
        },
        {
            "endereco": "Valor do campo Endereço do Registro 2",
            // ... e assim por diante para cada registro adicionado
        }
    ]
}</code></pre>

            <h4>Formato da Resposta JSON Esperada da IA:</h4>
            <p>A interface de teste está preparada para receber e exibir de forma otimizada uma resposta do Agente de IA
                que seja um array de objetos, onde cada objeto representa uma análise detalhada. O formato ideal é:</p>
            <pre><code>[
  {
    "doenca": "Nome da Doença Analisada",
    "bairro": "Bairro/Região de Maior Incidência",
    "causa_possivel": "Descrição da causa provável identificada pela IA.",
    "mitigacao": "Sugestão de ações de mitigação.",
    "pq_mitiga": "Explicação de por que a mitigação sugerida pode funcionar.",
    "estimativa_reducao_percentual": "Ex: 30%",
    "pq_da_estimativa_reducao_percentual": "Fundamentação para a estimativa de redução."
  },
  // ... mais objetos de análise, se houver
]</code></pre>
            <p>Se a resposta da IA vier neste formato (seja diretamente como um array JSON, ou como uma string JSON
                dentro do campo "resultado" ou "raw" da resposta principal do backend), ela será exibida em cards
                legíveis. Outros formatos de resposta serão exibidos como texto formatado ou JSON bruto.</p>
        </section>

        <section class="actions-bar">
            <a href="teste.html" class="btn btn-primary"><i class="fas fa-flask"></i> Ir para Teste da IA</a>
        </section>

        <footer class="page-footer">
            <p>&copy; 2025 DiagnoMap - Documentação Técnica</p>
        </footer>
    </div>

    <script>
        // Nenhum JavaScript específico para funcionalidade desta página é necessário
    </script>
</body>

</html>
